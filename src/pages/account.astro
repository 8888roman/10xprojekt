---
import Layout from "../layouts/Layout.astro";

const {
  data: { user },
} = await Astro.locals.supabase.auth.getUser();

if (!user) {
  return Astro.redirect("/login");
}
---

<Layout title="Konto">
  <main class="mx-auto flex w-full max-w-4xl flex-col gap-6 px-4 py-8">
    <header class="space-y-2">
      <h1 class="text-3xl font-semibold">Twoje konto</h1>
      <p class="text-sm text-muted-foreground">
        Zalogowano jako: {user.email}
      </p>
    </header>
    <section class="rounded-lg border bg-card p-4 shadow-sm">
      <p class="text-sm text-muted-foreground">
        To jest widok konta. Dalsze ustawienia zostana dodane w kolejnych krokach.
      </p>
    </section>
    <section class="rounded-lg border bg-card p-4 shadow-sm">
      <form method="post" action="/api/auth/logout" class="flex flex-wrap items-center justify-between gap-3">
        <div class="text-sm text-muted-foreground">Wyloguj sie z aplikacji.</div>
        <button
          type="submit"
          class="rounded-md bg-destructive px-4 py-2 text-sm font-medium text-destructive-foreground shadow-sm hover:bg-destructive/90"
        >
          Wyloguj
        </button>
      </form>
    </section>
  </main>
</Layout>
